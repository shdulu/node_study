## 浏览器的事件循环

关心我们的异步任务是怎么执行的， 定时器，ajax 底层还是基于多线程模型

> 计算机调度任务的基本单位都是以进程单位， （计算机软件都运行在进程中，进程中包含线程）

## 浏览器是一个多进程模型

- 浏览器进程： 主要负责界面显示、用户交互、子进程管理、同时提供存储等功能
- 渲染进程：核心任务是将 HTML、CSS、JavaScript 转换为用户可以与之交互的网页，排版引擎 Blink 和 JavaScript 引擎 V8 都是运行在该进程中（互斥不能同时执行），默认情况下，Chrome 会为每个 Tab 标签创建一个渲染进程（同域下的 tab 可能会共用一个渲染进程）。出于安全考虑，渲染进程都是运行在沙箱模式下

- GPU 进程：其实，Chrome 刚开始发布的时候是没有 GPU 进程的。而 GPU 的使用初衷是为了实现 3D CSS 的效果，只是随后网页、Chrome 的 UI 界面都选择采用 GPU 来绘制，这使得 GPU 成为浏览器普遍的需求。最后，Chrome 在其多进程架构上也引入了 GPU 进程。

- 网络进程：主要负责页面的网络资源加载，之前是作为一个模块运行在浏览器进程里面的，直至最近才独立出来，成为一个单独的进程。
- 插件进程：主要是负责插件的运行，因插件易崩溃，所以需要通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响。

## JS 单线程

- 为什么 js 不设计成多线程？

1.  不同线程同时操作一个 dom 问题
2.  页面渲染和 js 执行不能同时进行，假如 js 执行删除 dom，页面同时去渲染会出问题

## webworker 工作线程 -

使用场景 - 有一个功能存在大量计算，这个时候开一个 webworker 线程去计算，完成后交给主线程

1. 只能计算，不能操作 dom

## JS 特点 单线程异步

异步任务进行分类，底层实现基于线程

> 事件触发线程 eventloop - 不停的检测消息队列中是否有任务？？

> 宏任务队列只有一个(消息队列，宏任务队列)

1. 宏任务 -宏任务队列，只有一个顺序执行

- 执行 js 脚本
- UI 渲染
- ajax
- 定时器
- 事件
- MessageChannel
- setImmediate
- setTimeout

2. 微任务
   > 微任务队列 - 每次执行宏任务的时候都会创建一个微任务队列

- promise
- mutationObserver
- process.nextTick

## 为什么区分宏任务和微任务

